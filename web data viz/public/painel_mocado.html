<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <title>Painel</title>
    <header>
        <div class="navegar">
            <div>
                <a href="index.html"><img src="imgs/logo2.png" alt=""></a>
            </div>
            <ul class="menu">
                <li><a href="sobre-mim.html">Sobre Mim</a></li>
                <li><a href="forum.html">Fórum</a></li>
                <li><a href="sobre-o-livro.html">Sobre o Livro</a></li>
                <li><a href="cadastro.html">Cadastro</a></li>
            </ul>
        </div>
        <div class="acessar">
            <span id="b_usuario">usuário</span>
        </div>
        <div>
            <img src="imgs/user.png" alt="" style="width: 40px; height: 40px; padding-top: 5px; padding-left: 40px;">
        </div>
        <div>
            <img onclick="exibirMenu()" src="imgs/sandwich.png" alt="" style="width: 40px; height: 40px; padding-top: 5px; padding-left: 30px;">
        </div>
        <div class="menu_lateral" id="menu_lateral">
                <ul class="menu">
                <li><a href="sobre-mim.html">Configurações</a></li>
                <li><a href="painel.html">Verificar Painel</a></li>
                <li onclick="sair()"><a href="index.html">Sair</a></li>
            </ul>
        </div>
    </header>
</head>

<body>
    <section>
        <div class="faixa"></div>
        <div class="container-escuro" id="container">
            <div class="kpis">
                <div class="cards" id="cardkpis">
                    <div class="card-kpi">
                        <div class="title-kpi">
                            <h2>Número de Acessos</h2>
                        </div>
                        <div class="desc-kpi">
                            <div class="temperatura">
                                <p id="temp_kpi_${item.id}">12</p>
                            </div>
                            <div class="cor-alerta" id="card_${item.id}"></div>
                        </div>
                    </div>
                </div>
                <div class="cards" id="cardkpis">
                    <div class="card-kpi">
                        <div class="title-kpi">
                            <h2>Tópicos Criados</h2>
                        </div>
                        <div class="desc-kpi">
                            <div class="temperatura">
                                <p id="temp_kpi_${item.id}">5</p>
                            </div>
                            <div class="cor-alerta" id="card_${item.id}"></div>
                        </div>
                    </div>
                </div>
                <div class="cards" id="cardkpis">
                    <div class="card-kpi">
                        <div class="title-kpi">
                            <h2>Capítulos Lidos</h2>
                        </div>
                        <div class="desc-kpi">
                            <div class="temperatura">
                                <p id="temp_kpi_${item.id}">10/110</p>
                            </div>
                            <div class="cor-alerta" id="card_${item.id}"></div>
                        </div>
                    </div>
                </div>
                <div class="cards" id="cardkpis">
                    <div class="card-kpi">
                        <div class="title-kpi">
                            <h2>Curtidas</h2>
                        </div>
                        <div class="desc-kpi">
                            <div class="temperatura">
                                <p id="temp_kpi_${item.id}">0</p>
                            </div>
                            <div class="cor-alerta" id="card_${item.id}"></div>
                        </div>
                    </div>
                </div>
                <div class="cards" id="cardkpis">
                    <div class="card-kpi">
                        <div class="title-kpi">
                            <h2>Visualizações</h2>
                        </div>
                        <div class="desc-kpi">
                            <div class="temperatura">
                                <p id="temp_kpi_${item.id}">12</p>
                            </div>
                            <div class="cor-alerta" id="card_${item.id}"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="dash">
                <canvas id="bar" width="300px" height="300px"></canvas>

                <div id="caixa_cap">
                    <div id="capitulos"></div>
                </div>
                
            </div>
        </div>
        </div>
        
        </div>
        <div class="faixa">
    </section>
</body>
<footer>
    <span>Elaborado por João Ricardo Jortieke Junior, 2025.</span>
</footer>

</html>

<script>
    b_usuario.innerHTML = sessionStorage.NOME_USUARIO;
    var menu = false;

    const ctx = document.getElementById('bar');

    new Chart(ctx, {
    type: 'bar',
    data: {
        labels: ['Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
        datasets: [{
            label: 'Capítulos Lidos',
            data: [3, 5, 12, 4, 2, 3],
            borderColor: '#10491B',
            backgroundColor: '#C3D1C6',
            borderWidth: 1
        }]
    },
    options: {
        plugins: {
            title: {
                display: true,
                text: 'Número de Capítulos Lidos',
                color: 'black'
            },
            legend: {
                labels: {
                    color: 'black'
                }
            }
        },
        scales: { 
            x: {
                ticks: {
                    color: 'black'
                },
                grid: {
                    color: 'black'
                }
            },
            y: {
                beginAtZero: true,
                ticks: {
                    color: 'black'
                },
                grid: {
                    color: 'black'
                }
            }
        }
    }
});
   
    function exibirMenu(){
        if (menu == false) {
            menu = true;
            menu_lateral.style.display = "flex";
        } else { 
            menu = false;
            menu_lateral.style.display = "none";
        }
        
    }

    function sair(){
        sessionStorage.clear();
        window.location.href = "login.html";
    }
    

    function montarCapitulos() {
    var blocos = [
        ["Parte I", 1, 20],
        ["Parte II", 21, 40],
        ["Parte III", 41, 60],
        ["Parte IV", 61, 80],
        ["Parte V", 81, 100],
        ["Parte VI", 101, 110]
    ];

    var html = "";

    for (var i = 0; i < blocos.length; i++) {
        var titulo = blocos[i][0];
        var inicio = blocos[i][1];
        var fim = blocos[i][2];

        html += "<details>";
        html += "<summary>" + titulo + " (Cap. " + inicio + " a " + fim + ")</summary>";

        html += "<button onclick=\"marcarBloco(" + inicio + "," + fim + ")\">Marcar tudo neste bloco</button><br>";

        for (var c = inicio; c <= fim; c++) {
            html += "<label><input type='checkbox' id='cap" + c + "'> Cap. " + c + "</label> ";
        }

        html += "</details>";
    }

    html += "<button id='btnSalvarChapters' onclick='salvarCapitulos()'>Salvar Leitura</button>";

    document.getElementById("capitulos").innerHTML = html;
}

function marcarBloco(inicio, fim) {
    for (var c = inicio; c <= fim; c++) {
        var checkbox = document.getElementById("cap" + c);
        if (checkbox) {
            checkbox.checked = true;
        }
    }
}

function salvarCapitulos() {
    var lidos = [];

    for (var i = 1; i <= 110; i++) {
        var c = document.getElementById("cap" + i);
        if (c && c.checked === true) {
            lidos.push(i);
        }
    }

    alert("Capítulos salvos: " + lidos.join(", "));
}


montarCapitulos();   
  
</script>